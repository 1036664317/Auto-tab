# 更新日志 (Changelog)

## [1.2.0] - 2025-10-23

### 新增功能 ✨
- **分组后自动折叠**: 添加"分组后自动折叠标签"选项，创建分组时默认折叠，保持标签栏整洁
  - 可在设置中启用/禁用此功能
  - 默认启用，减少标签栏视觉混乱

### 修复 🐛
- **时间分组不准确**: 修复标签没有按照设置的时间间隔正确分组的问题
  - 添加 `initializeExistingTabs()` 函数，为现有标签分配创建时间
  - 重写 `getTimeGroupKey()` 函数，精确按时间间隔分组
  - 新的分组逻辑：
    - 0-N 分钟 → "最近N分钟"
    - N-2N 分钟 → "2N分钟前"
    - 2N-3N 分钟 → "3N分钟前"
    - 3N-24小时 → "X小时前"
    - 24小时+ → "X天前"

### 改进 🚀
- **增强的调试日志**: 在分组过程中添加详细的控制台日志
  - 显示每个标签的年龄和分组决策
  - 显示分组统计信息
  - 帮助用户和开发者诊断问题
- **更清晰的分组标题**: 根据新的分组键格式生成更准确的标题
- **优化的颜色编码**: 为不同时间段的分组分配更合适的颜色

### 技术细节 🔧
- 在插件启动时初始化所有现有标签的创建时间（随机0-120分钟）
- 分组时设置 `collapsed: true` 属性
- 添加 `autoCollapse` 设置项到存储和界面

---

## [1.1.2] - 之前版本

### 功能
- 基于时间的自动标签分组
- 支持多种时间间隔：30分钟、1小时、2小时、4小时、上午/下午、12小时、24小时
- 自动分组定时器（1-30分钟间隔）
- 快速操作：按小时分组、按天分组
- 可选包含/排除固定标签
- 关闭自动分组时可选取消现有分组

### 已知问题（已在 1.2.0 修复）
- 标签没有按照规定的时间间隔正确分组
- 现有标签缺少创建时间记录
- 分组逻辑不够精确

---

## 升级说明

### 从 1.1.2 升级到 1.2.0

1. **重新加载插件**
   - 访问 `chrome://extensions/`
   - 找到 Auto Tab Grouper
   - 点击"重新加载"按钮

2. **新设置**
   - 打开插件弹窗
   - 查看新增的"分组后自动折叠标签"选项
   - 默认已启用，如不需要可以取消勾选

3. **验证修复**
   - 启用自动分组
   - 查看控制台日志（右键插件图标 → "审查弹出内容"）
   - 确认标签按照设置的时间间隔正确分组
   - 确认分组默认处于折叠状态

4. **清除旧分组（可选）**
   - 如果有旧版本创建的不正确分组
   - 可以勾选"关闭自动分组时取消现有分组"
   - 关闭并重新开启自动分组

---

## 反馈与支持

如果遇到问题或有建议，请：
1. 查看 `TESTING_GUIDE.md` 了解详细测试步骤
2. 查看浏览器控制台的日志信息
3. 提供具体的错误信息和复现步骤

感谢您的使用！ 🎉

